# Architectural Decision Records (ADR) – Weather App

## ADR-001: Використання Fastify як HTTP-сервера

**Дата:** 2025-06-07  
**Статус:** Прийнято  

**Контекст:**  
Потрібен легкий, продуктивний HTTP-сервер для побудови REST API.

**Рішення:**  
Обрано Fastify через:
- Високу продуктивність
- Просту інтеграцію з TypeScript
- Розвинуту систему плагінів
- Підтримку JSON Schema валідації на рівні маршруту

**Наслідки:**  
- Спрощене тестування і розширення
- Проста читабельність
- Використання плагінів Fastify замість звичних middleware

---

## ADR-002: Використання PostgreSQL як бази даних

**Дата:** 2025-06-07  
**Статус:** Прийнято  

**Контекст:**  
Потрібно зберігати підписки користувачів. У подальшому передбачаються чітки зв'язки між сутностями. Окрім цього важлива можливість роботи з транзакціями. 

**Рішення:**  
Використовуємо PostgreSQL:
- Реляційна БД підходить для структурованих зв’язків
- Підтримка транзакцій для оновлення взаємозалежних записів
- Доступні розширення для зручності масштабування
- Працює з Prisma ORM

**Наслідки:**  
- Необхідно слідкувати за міграціями
- Потенційно потребуватиме оптимізації при масштабуванні

---

## ADR-003: Використання Prisma як ORM

**Дата:** 2025-06-07  
**Статус:** Прийнято  

**Контекст:**  
Потрібна зручна ORM з автогенерацією типів і інтеграцією з TypeScript.

**Рішення:**  
Prisma:
- Швидке створення моделей і міграцій
- Автогенерація TS типів
- Простий синтаксис запитів

**Наслідки:**  
- Вимагає ручного оновлення схеми при зміні БД
- Важливо моніторити performance при складних join операціях

---

## ADR-004: Валідація через Zod

**Дата:** 2025-06-07  
**Статус:** Прийнято  

**Контекст:**  
Потрібна типобезпечна валідація запитів на вході.

**Рішення:**  
Використовуємо Zod:
- Сумісний з TypeScript
- Універсальне використання (HTTP, cron, email)
- Zod-схеми одночасно виступають як валідація і як джерело типів DTO

**Наслідки:**  
- Код може дублювати опис схеми Prisma
- Потрібно синхронізувати структури даних
- Просте тестування вхідних даних і передача типізованих DTO далі в бізнес-логіку

---

## ADR-005: Отримання погодних даних з OpenWeather API

**Дата:** 2025-06-07  
**Статус:** Прийнято  

**Контекст:**  
Потрібне надійне джерело погодних даних з прогнозом.

**Рішення:**  
- Обрали OpenWeather через гнучке API, доступність погодинного/щоденного прогнозу

**Наслідки:**  
- Залежність від стороннього сервісу
- Можливість керувати об'ємом даних, що надходить у відповіді API

---

